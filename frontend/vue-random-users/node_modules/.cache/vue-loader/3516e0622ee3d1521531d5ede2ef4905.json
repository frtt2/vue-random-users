{"remainingRequest":"/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/src/views/Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/src/views/Users.vue","mtime":1617062562984},{"path":"/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CmltcG9ydCB7bWRiQ29udGFpbmVyLCBtZGJSb3csIG1kYkJ0biwgbWRiSWNvbn0gZnJvbSAnbWRidnVlJzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1BhZ2luYXRpb24udnVlJzsKaW1wb3J0IERhdGFUYWJsZSBmcm9tICcuLi9jb21wb25lbnRzL0RhdGFUYWJsZS52dWUnOwppbXBvcnQgR2VuZGVyRmlsdGVyIGZyb20gJy4uL2NvbXBvbmVudHMvR2VuZGVyRmlsdGVyLnZ1ZSc7CmltcG9ydCBOYXRGaWx0ZXIgZnJvbSAnLi4vY29tcG9uZW50cy9OYXRGaWx0ZXIudnVlJzsKaW1wb3J0IEFnZUZpbHRlciBmcm9tICcuLi9jb21wb25lbnRzL0FnZUZpbHRlci52dWUnOwoKCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1VzZXJzJywKICBjb21wb25lbnRzOnsKICAgIG1kYkNvbnRhaW5lciwKICAgIG1kYlJvdywKICAgIG1kYkJ0biwKICAgIG1kYkljb24sCiAgICBQYWdpbmF0aW9uLAogICAgRGF0YVRhYmxlLAogICAgR2VuZGVyRmlsdGVyLAogICAgTmF0RmlsdGVyLAogICAgQWdlRmlsdGVyCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcnM6IFtdLAogICAgICB1c2Vyc0ZpbHRlcmVkOltdLAogICAgICBudW1Vc2VyczogMSwKICAgICAgdXNlcnNQYWc6IFtdLAogICAgICBwYWdlOjEsCiAgICAgIGFnZTogWzAsMTIyXSwKICAgICAgbmF0U2VsZWN0ZWQ6ICcnLAogICAgICBnZW5kZXJTZWxlY3RlZDogJycsCiAgICAgIGxvYWRlZDogZmFsc2UKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm1pbiA9IDAKICAgIHRoaXMubWF4ID0gMTIyCiAgICB0aGlzLmVuYWJsZUNyb3NzID0gZmFsc2UKCiAgICB0aGlzLnVzZXJzID0gdGhpcy4kcGFyZW50LnVzZXJzCiAgICB0aGlzLnVzZXJzRmlsdGVyZWQgPSB0aGlzLiRwYXJlbnQudXNlcnNGaWx0ZXJlZAogICAgdGhpcy5udW1Vc2VycyA9IHRoaXMuJHBhcmVudC5udW1Vc2VycwogICAgdGhpcy51c2Vyc1BhZyA9IHRoaXMuJHBhcmVudC51c2Vyc1BhZwogICAgdGhpcy5wYWdlID0gdGhpcy4kcGFyZW50LnBhZ2UKICAgIHRoaXMudmFsdWUgPSB0aGlzLiRwYXJlbnQudmFsdWUKICAgIHRoaXMubmF0U2VsZWN0ZWQgPSB0aGlzLiRwYXJlbnQubmF0U2VsZWN0ZWQKICAgIHRoaXMuZ2VuZGVyU2VsZWN0ZWQgPSB0aGlzLiRwYXJlbnQuZ2VuZGVyU2VsZWN0ZWQKICAgIHRoaXMubG9hZGVkID0gdGhpcy4kcGFyZW50LmxvYWRlZAogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMuJHBhcmVudC51c2VycyA9IHRoaXMudXNlcnMKICAgIHRoaXMuJHBhcmVudC51c2Vyc0ZpbHRlcmVkID0gdGhpcy51c2Vyc0ZpbHRlcmVkCiAgICB0aGlzLiRwYXJlbnQubnVtVXNlcnMgPSB0aGlzLm51bVVzZXJzCiAgICB0aGlzLiRwYXJlbnQudXNlcnNQYWcgPSB0aGlzLnVzZXJzUGFnCiAgICB0aGlzLiRwYXJlbnQucGFnZSA9IHRoaXMucGFnZQogICAgdGhpcy4kcGFyZW50LnZhbHVlID0gdGhpcy52YWx1ZQogICAgdGhpcy4kcGFyZW50Lm5hdFNlbGVjdGVkID0gdGhpcy5uYXRTZWxlY3RlZAogICAgdGhpcy4kcGFyZW50LmdlbmRlclNlbGVjdGVkID0gdGhpcy5nZW5kZXJTZWxlY3RlZAogICAgdGhpcy4kcGFyZW50LmxvYWRlZCA9IHRoaXMubG9hZGVkCiAgfSwKICBtb3VudGVkKCl7CiAgICB0aGlzLmZldGNoRGF0YQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGxpbWl0ZWRJdGVtcygpIHsKICAgICAgcmV0dXJuIHRoaXMudXNlcnNGaWx0ZXJlZC5zbGljZShwYXJzZUludCh0aGlzLnBhZ2UtMSkqMTAsIHBhcnNlSW50KHRoaXMucGFnZSkqMTAgKQogICAgfSwKICAgIG51bVBhZ3MoKXsKICAgICAgcmV0dXJuIE1hdGgudHJ1bmMocGFyc2VJbnQodGhpcy5udW1Vc2VycykvMTApCiAgICB9LAogIH0sCiAgbWV0aG9kczp7CiAgICAvL1BBR0lOQVRJT04KICAgIGFzeW5jIGdvRXhwb3J0cygpewogICAgICBhd2FpdCB0aGlzLmZldGNoRGF0YSgpCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ0V4cG9ydHMnLCBwYXJhbXM6IHt1c2VyczogdGhpcy51c2VycyB9fSkKICAgIH0sCiAgICB1cGRhdGVQYWdlKG5ld1ZhbHVlKXsKICAgICAgdGhpcy5wYWdlID0gbmV3VmFsdWUKICAgIH0sCiAgICB1cGRhdGVHZW5kZXIobmV3VmFsdWUpewogICAgICB0aGlzLmdlbmRlclNlbGVjdGVkID0gbmV3VmFsdWUKICAgIH0sCiAgICB1cGRhdGVBZ2UobmV3VmFsdWUpewogICAgICB0aGlzLmFnZSA9IG5ld1ZhbHVlCiAgICB9LAogICAgdXBkYXRlTmF0KG5ld1ZhbHVlKXsKICAgICAgdGhpcy5uYXRTZWxlY3RlZCA9IG5ld1ZhbHVlCiAgICB9LAogICAgLy9TRVJWSUNJT1MKICAgIGZpbHRlckl0ZW1zKCl7CiAgICAgIGxldCBpdGVtc0ZpbHRlcmVkID0gdGhpcy51c2VycwoKICAgICAgaWYgKHRoaXMubmF0U2VsZWN0ZWQhPT0nJyl7CiAgICAgICAgaXRlbXNGaWx0ZXJlZCA9IGl0ZW1zRmlsdGVyZWQuZmlsdGVyKG9iaiA9PiBvYmoubmF0aW9uYWxpdHkgPT0gdGhpcy5uYXRTZWxlY3RlZCkKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZ2VuZGVyU2VsZWN0ZWQhPT0nJyl7CiAgICAgICAgaXRlbXNGaWx0ZXJlZD0gaXRlbXNGaWx0ZXJlZC5maWx0ZXIob2JqID0+IG9iai5nZW5kZXIgPT0gdGhpcy5nZW5kZXJTZWxlY3RlZCkKICAgICAgfQogICAgICBpdGVtc0ZpbHRlcmVkID0gaXRlbXNGaWx0ZXJlZC5maWx0ZXIob2JqID0+IG9iai5hZ2UgPiB0aGlzLmFnZVswXSAmJiBvYmouYWdlIDwgdGhpcy5hZ2VbMV0pCiAgICAgIHRoaXMudXNlcnNGaWx0ZXJlZCA9IGl0ZW1zRmlsdGVyZWQKICAgICAgdGhpcy5nZXROdW1Vc2VycygpCgogICAgfSwKICAgIGdldERhdGFVc2VycyhyZXMpewogICAgICB0aGlzLnVzZXJzMiA9IHJlcy5kYXRhLnJlc3VsdHMKICAgIH0sCiAgICBnZXROdW1Vc2VycygpewogICAgICB0aGlzLm51bVVzZXJzID0gdGhpcy51c2Vyc0ZpbHRlcmVkLmxlbmd0aAogICAgICB0aGlzLnBhZ2UgPSAxCiAgICB9LAogICAgcHJlcGFyZURhdGEoKXsKICAgICAgdGhpcy51c2VycyA9IHRoaXMudXNlcnMyLm1hcCh1c2VyID0+ICh7CiAgICAgICAgaWQ6IHVzZXIubG9naW4udXVpZCwKICAgICAgICBuYW1lOiB1c2VyLm5hbWUudGl0bGUgKyAiICIgKyB1c2VyLm5hbWUuZmlyc3QgKyAiICIgKyB1c2VyLm5hbWUubGFzdCwKICAgICAgICB1c2VybmFtZTogdXNlci5sb2dpbi51c2VybmFtZSwKICAgICAgICBnZW5kZXI6IHVzZXIuZ2VuZGVyLAogICAgICAgIG5hdGlvbmFsaXR5OiB1c2VyLm5hdCwKICAgICAgICBzdHJlZXROdW1iZXI6IHVzZXIubG9jYXRpb24uc3RyZWV0Lm51bWJlciwKICAgICAgICBzdHJlZXROYW1lOiB1c2VyLmxvY2F0aW9uLnN0cmVldC5uYW1lLAogICAgICAgIGNpdHk6IHVzZXIubG9jYXRpb24uY2l0eSwKICAgICAgICBzdGF0ZTogdXNlci5sb2NhdGlvbi5zdGF0ZSwKICAgICAgICBwb3N0Y29kZTogdXNlci5sb2NhdGlvbi5wb3N0Y29kZSwKICAgICAgICBsYXRpdHVkZTogdXNlci5sb2NhdGlvbi5jb29yZGluYXRlcy5sYXRpdHVkZSwKICAgICAgICBsb25naXR1ZGU6IHVzZXIubG9jYXRpb24uY29vcmRpbmF0ZXMubG9uZ2l0dWRlLAogICAgICAgIHJlZ2lzdGVyZWQ6IHVzZXIucmVnaXN0ZXJlZC5kYXRlLAogICAgICAgIHBob25lOiB1c2VyLnBob25lLAogICAgICAgIGNlbGw6IHVzZXIuY2VsbCwKICAgICAgICBlbWFpbDogdXNlci5lbWFpbCwKICAgICAgICBpbWFnZUxhcmdlOiB1c2VyLnBpY3R1cmUubGFyZ2UsCiAgICAgICAgYmlydGhkYXRlOiBtb21lbnQoKS5zdWJ0cmFjdCh1c2VyLmRvYi5hZ2UsICd5ZWFycycpLmZvcm1hdCgnWVlZWS1NTS1ERCcpLAogICAgICAgIGFnZTp1c2VyLmRvYi5hZ2UsCiAgICAgICAgcmVnaXN0cmF0aW9uRGF0ZTogdXNlci5yZWdpc3RlcmVkLmRhdGUsCiAgICAgICAgZmF2b3VyaXRlOmZhbHNlCiAgICAgIH0pKQogICAgfSwKICAgIGFzeW5jIGZldGNoRGF0YSAoKXsKICAgICAgdHJ5ewogICAgICAgIGlmKHRoaXMubG9hZGVkID09IGZhbHNlKXsKICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IFZ1ZS5heGlvcyh7dXJsOicvYXBpLzEuMy8/cmVzdWx0cz0xMDAmc2VlZD1hYmMnfSkKICAgICAgICAgIHRoaXMuZ2V0RGF0YVVzZXJzKHJlcykKICAgICAgICAgIHRoaXMucHJlcGFyZURhdGEoKQogICAgICAgIH0KICAgICAgICAgIHRoaXMuZmlsdGVySXRlbXMoKQogICAgICAgICAgdGhpcy5nZXROdW1Vc2VycygpCiAgICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWUKICAgICAgfWNhdGNoKGUpewogICAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgfQogICAgfQogICAgLypkYXRhUGFnaW5hdGlvbigpewogICAgICB0aGlzLnVzZXJzUGFnID0gdGhpcy51c2Vycy5zbGljZShwYXJzZUludCh0aGlzLnBhZ2UpKjEwLCBwYXJzZUludCh0aGlzLnBhZ2UpKjEwICsgMTApOwogICAgfSovCiAgfQp9Cg=="},{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Users.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <mdb-container class=\"mt-4\">\n      <mdb-row class=\"d-flex justify-content-end\">\n        <mdb-btn class=\"mr-3\" color=\"primary\" @click=\"fetchData\"><mdb-icon icon=\"search\"/></mdb-btn>\n        <mdb-btn class=\"mr-3\" color=\"primary\" @click=\"goExports\"><mdb-icon icon=\"file-export\"/></mdb-btn>\n      </mdb-row>\n      <mdb-row class=\"table-height\">\n        <data-table :limitedItems=\"limitedItems\"/>\n      </mdb-row>\n      <mdb-row class=\"mb-5 pagination-height\" >\n        <pagination :page=\"page\" :numPags=\"numPags\" @updatePage=\"updatePage\" v-if=\"numPags>1\"/>\n      </mdb-row>\n      <mdb-row class=\"mt-3\">\n        <gender-filter :genderSelected=\"genderSelected\" @updateGender=\"updateGender\" />\n        <age-filter :age=\"age\" @updateAge=\"updateAge\" />\n        <nat-filter :natSelected=\"natSelected\" @updateNat=\"updateNat\" />\n      </mdb-row>\n    </mdb-container>\n \n</template>\n\n<script>\n\nimport Vue from \"vue\";\nimport {mdbContainer, mdbRow, mdbBtn, mdbIcon} from 'mdbvue';\nimport moment from 'moment';\nimport Pagination from '../components/Pagination.vue';\nimport DataTable from '../components/DataTable.vue';\nimport GenderFilter from '../components/GenderFilter.vue';\nimport NatFilter from '../components/NatFilter.vue';\nimport AgeFilter from '../components/AgeFilter.vue';\n\n\n\nexport default {\n  name: 'Users',\n  components:{\n    mdbContainer,\n    mdbRow,\n    mdbBtn,\n    mdbIcon,\n    Pagination,\n    DataTable,\n    GenderFilter,\n    NatFilter,\n    AgeFilter\n  },\n  data() {\n    return {\n      users: [],\n      usersFiltered:[],\n      numUsers: 1,\n      usersPag: [],\n      page:1,\n      age: [0,122],\n      natSelected: '',\n      genderSelected: '',\n      loaded: false\n    }\n  },\n  created() {\n    this.min = 0\n    this.max = 122\n    this.enableCross = false\n\n    this.users = this.$parent.users\n    this.usersFiltered = this.$parent.usersFiltered\n    this.numUsers = this.$parent.numUsers\n    this.usersPag = this.$parent.usersPag\n    this.page = this.$parent.page\n    this.value = this.$parent.value\n    this.natSelected = this.$parent.natSelected\n    this.genderSelected = this.$parent.genderSelected\n    this.loaded = this.$parent.loaded\n  },\n  beforeDestroy() {\n    this.$parent.users = this.users\n    this.$parent.usersFiltered = this.usersFiltered\n    this.$parent.numUsers = this.numUsers\n    this.$parent.usersPag = this.usersPag\n    this.$parent.page = this.page\n    this.$parent.value = this.value\n    this.$parent.natSelected = this.natSelected\n    this.$parent.genderSelected = this.genderSelected\n    this.$parent.loaded = this.loaded\n  },\n  mounted(){\n    this.fetchData\n  },\n  computed: {\n    limitedItems() {\n      return this.usersFiltered.slice(parseInt(this.page-1)*10, parseInt(this.page)*10 )\n    },\n    numPags(){\n      return Math.trunc(parseInt(this.numUsers)/10)\n    },\n  },\n  methods:{\n    //PAGINATION\n    async goExports(){\n      await this.fetchData()\n      this.$router.push({ name: 'Exports', params: {users: this.users }})\n    },\n    updatePage(newValue){\n      this.page = newValue\n    },\n    updateGender(newValue){\n      this.genderSelected = newValue\n    },\n    updateAge(newValue){\n      this.age = newValue\n    },\n    updateNat(newValue){\n      this.natSelected = newValue\n    },\n    //SERVICIOS\n    filterItems(){\n      let itemsFiltered = this.users\n\n      if (this.natSelected!==''){\n        itemsFiltered = itemsFiltered.filter(obj => obj.nationality == this.natSelected)\n      }\n\n      if (this.genderSelected!==''){\n        itemsFiltered= itemsFiltered.filter(obj => obj.gender == this.genderSelected)\n      }\n      itemsFiltered = itemsFiltered.filter(obj => obj.age > this.age[0] && obj.age < this.age[1])\n      this.usersFiltered = itemsFiltered\n      this.getNumUsers()\n\n    },\n    getDataUsers(res){\n      this.users2 = res.data.results\n    },\n    getNumUsers(){\n      this.numUsers = this.usersFiltered.length\n      this.page = 1\n    },\n    prepareData(){\n      this.users = this.users2.map(user => ({\n        id: user.login.uuid,\n        name: user.name.title + \" \" + user.name.first + \" \" + user.name.last,\n        username: user.login.username,\n        gender: user.gender,\n        nationality: user.nat,\n        streetNumber: user.location.street.number,\n        streetName: user.location.street.name,\n        city: user.location.city,\n        state: user.location.state,\n        postcode: user.location.postcode,\n        latitude: user.location.coordinates.latitude,\n        longitude: user.location.coordinates.longitude,\n        registered: user.registered.date,\n        phone: user.phone,\n        cell: user.cell,\n        email: user.email,\n        imageLarge: user.picture.large,\n        birthdate: moment().subtract(user.dob.age, 'years').format('YYYY-MM-DD'),\n        age:user.dob.age,\n        registrationDate: user.registered.date,\n        favourite:false\n      }))\n    },\n    async fetchData (){\n      try{\n        if(this.loaded == false){\n          const res = await Vue.axios({url:'/api/1.3/?results=100&seed=abc'})\n          this.getDataUsers(res)\n          this.prepareData()\n        }\n          this.filterItems()\n          this.getNumUsers()\n          this.loaded = true\n      }catch(e){\n          console.log(e)\n      }\n    }\n    /*dataPagination(){\n      this.usersPag = this.users.slice(parseInt(this.page)*10, parseInt(this.page)*10 + 10);\n    }*/\n  }\n}\n</script>\n\n<style lang=\"sass\" scope>  \n.prueba1\n  border: 1px solid none\n  box-shadow: none!important\n  background: transparent!important\n  color: white\n</style>\n"]}]}