{"remainingRequest":"/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/src/views/Details.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/src/views/Details.vue","mtime":1616996463391},{"path":"/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/xoo3/Documentos/ACCIONA/aplicacion/vue-random-users/frontend/vue-random-users/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWRiQ29udGFpbmVyLCBtZGJSb3csIG1kYkNvbCwgbWRiQnRuLCBtZGJJY29uLCBtZGJDYXJkLCBtZGJWaWV3LCBtZGJNYXNrLCBtZGJDYXJkSW1hZ2UsIG1kYkNhcmRUaXRsZSwgbWRiQ2FyZFRleHQsIG1kYkNhcmRGb290ZXIsIG1kYkNhcmRCb2R5fSBmcm9tICdtZGJ2dWUnOwovL2ltcG9ydCBNYXAgZnJvbSAiLi4vY29tcG9uZW50cy9NYXBEZXRhaWxzIjsKaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1VzZXJzJywKICBwcm9wczp7CiAgICB1c2VyOiBPYmplY3QKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmYXZvdXJpdGVzVXNlcnM6IFtdLAogICAgICBlcnJvcjpmYWxzZQogICAgfQogIH0sCiAgY29tcG9uZW50czp7CiAgICBtZGJDb250YWluZXIsCiAgICBtZGJSb3csCiAgICBtZGJDb2wsCiAgICBtZGJCdG4sCiAgICBtZGJJY29uLAogICAgbWRiQ2FyZCwKICAgIG1kYlZpZXcsCiAgICBtZGJNYXNrLAogICAgbWRiQ2FyZEltYWdlLAogICAgbWRiQ2FyZFRpdGxlLAogICAgbWRiQ2FyZFRleHQsCiAgICBtZGJDYXJkRm9vdGVyLAogICAgbWRiQ2FyZEJvZHkKICB9LAogIG1vdW50ZWQoKXsKICAgIHRoaXMuaW5pdEZhdm91cml0ZXMoKQogIH0sCiAgbWV0aG9kczp7CiAgICBhc3luYyBpbml0RmF2b3VyaXRlcygpewogICAgICBhd2FpdCB0aGlzLmdldEZhdm91cml0ZXMoKQogICAgICBhd2FpdCB0aGlzLm1hdGNoRmF2b3VyaXRlcygpCiAgICB9LAogICAgY2hhbmdlRmF2b3VyaXRlKGlkLCBuYW1lKXsKICAgICAgaWYodGhpcy51c2VyLmZhdm91cml0ZSA9PSB0cnVlKXsKICAgICAgICB0aGlzLmRlbGV0ZUZhdm91cml0ZShpZCkKICAgICAgfWVsc2V7CiAgICAgICAgdGhpcy5wb3N0RmF2b3VyaXRlKGlkLG5hbWUpCiAgICAgIH0KICAgIH0sCiAgICBwb3N0RmF2b3VyaXRlKGlkLCBuYW1lKXsKICAgICAgbGV0IHVzZXIgPSB7CiAgICAgICAgaWQsCiAgICAgICAgbmFtZQogICAgICB9CiAgICAgIFZ1ZS5heGlvcy5wb3N0KCJodHRwOi8vbG9jYWxob3N0OjMwMDAvdXNlcnMiLCB1c2VyKS4KICAgICAgdGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5nZXRGYXZvdXJpdGVzKCkKICAgICAgfSkKICAgICAgLnRoZW4oKCk9PnsKICAgICAgICB0aGlzLm1hdGNoRmF2b3VyaXRlcygpCiAgICAgIH0pCiAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy5lcnJvciA9IHRydWUKICAgICAgfSk7CiAgICAgICAgCiAgICB9LAogICAgZ2V0RmF2b3VyaXRlcygpewogICAgICBWdWUuYXhpb3MoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2VycyIpLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgIHRoaXMuZmF2b3VyaXRlc1VzZXJzID0gcmVzdWx0LmRhdGEKICAgICAgfSkKICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgfSkKICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZQogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVGYXZvdXJpdGUoaWQpewogICAgICBWdWUuYXhpb3MuZGVsZXRlKCJodHRwOi8vbG9jYWxob3N0OjMwMDAvdXNlcnMvIitpZCkuCiAgICAgIHRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuZ2V0RmF2b3VyaXRlcygpCiAgICAgIH0pCiAgICAgIC50aGVuKCgpPT57CiAgICAgICAgdGhpcy5tYXRjaEZhdm91cml0ZXMoKQogICAgICB9KQogICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlCiAgICAgIH0pOwogICAgfSwKICAgIG1hdGNoRmF2b3VyaXRlcygpewogICAgICBjb25zb2xlLmxvZyh0aGlzLmZhdm91cml0ZXNVc2VycykKICAgICAgZm9yIChsZXQgbj0wO248IHRoaXMuJHBhcmVudC51c2Vycy5sZW5ndGg7bisrKXsKICAgICAgICBpZih0aGlzLmZhdm91cml0ZXNVc2Vycy5maW5kKCB1c2VyID0+IHVzZXIuaWQgPT0gdGhpcy4kcGFyZW50LnVzZXJzW25dLmlkKSl7CiAgICAgICAgICAgY29uc29sZS5sb2coJ2VudHJhJykKICAgICAgICAgIGlmKHRoaXMuJHBhcmVudC51c2Vyc1tuXS5mYXZvdXJpdGUgPT0gdHJ1ZSl7CiAgICAgICAgICAgIHRoaXMuJHBhcmVudC51c2Vyc1tuXS5mYXZvdXJpdGUgPSBmYWxzZQogICAgICAgICAgICB0aGlzLnVzZXIuZmF2b3VyaXRlID0gZmFsc2UKICAgICAgICAgICAgY29uc29sZS5sb2coJ2VzIGZhbHNlJykKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICB0aGlzLiRwYXJlbnQudXNlcnNbbl0uZmF2b3VyaXRlID0gdHJ1ZQogICAgICAgICAgICB0aGlzLnVzZXIuZmF2b3VyaXRlID0gdHJ1ZQogICAgICAgICAgICBjb25zb2xlLmxvZygnZXMgdHJ1ZScpCiAgICAgICAgICB9CiAgICAgICAgICAKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["Details.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Details.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <mdb-container class=\"mt-4\">\n     <mdb-row class=\"d-flex justify-content-end\">\n        <mdb-btn class=\"mr-3\" color=\"primary\" @click=\"$router.push({ name: 'Users'})\"><mdb-icon icon=\"arrow-left\"/></mdb-btn>\n    </mdb-row>\n    <mdb-card wide>\n      <mdb-view hover cascade>\n        <mdb-row>\n          <mdb-col col=\"4\">\n            <mdb-card-image v-bind:src=\"user.imageLarge\" alt=\"Card image cap\" ></mdb-card-image>\n            <mdb-mask flex-center waves overlay=\"white-slight\"></mdb-mask>\n          </mdb-col>\n          <mdb-col col=\"6\">\n\n          </mdb-col>\n          <mdb-col col=\"2\">\n            <mdb-btn tag=\"a\" floating size=\"lg\" v-on:click=\"changeFavourite(user.id,user.name)\" color=\"primary\" ><mdb-icon icon=\"star\" :class=\"user.favourite ? 'fa-star' : 'fa-star-ini'\"/></mdb-btn>\n          </mdb-col>\n        </mdb-row>\n      </mdb-view>\n      <mdb-card-body class=\"text-center pb-0\" cascade>\n        <mdb-card-title><strong>{{user.name}}</strong></mdb-card-title>\n        <h5 class=\"blue-text\"><strong>{{user.email}}</strong></h5>\n        <mdb-card-footer class=\"text-muted mt-4\">\n          <mdb-card-text class=\"width-footer\">{{user.streetName}}, {{user.streetNumber}}, {{user.city}}, {{user.state}}</mdb-card-text>\n        </mdb-card-footer>\n      </mdb-card-body>\n    </mdb-card>\n  </mdb-container>\n</template>\n\n<script>\nimport {mdbContainer, mdbRow, mdbCol, mdbBtn, mdbIcon, mdbCard, mdbView, mdbMask, mdbCardImage, mdbCardTitle, mdbCardText, mdbCardFooter, mdbCardBody} from 'mdbvue';\n//import Map from \"../components/MapDetails\";\nimport Vue from \"vue\";\nexport default {\n  name: 'Users',\n  props:{\n    user: Object\n  },\n  data() {\n    return {\n      favouritesUsers: [],\n      error:false\n    }\n  },\n  components:{\n    mdbContainer,\n    mdbRow,\n    mdbCol,\n    mdbBtn,\n    mdbIcon,\n    mdbCard,\n    mdbView,\n    mdbMask,\n    mdbCardImage,\n    mdbCardTitle,\n    mdbCardText,\n    mdbCardFooter,\n    mdbCardBody\n  },\n  mounted(){\n    this.initFavourites()\n  },\n  methods:{\n    async initFavourites(){\n      await this.getFavourites()\n      await this.matchFavourites()\n    },\n    changeFavourite(id, name){\n      if(this.user.favourite == true){\n        this.deleteFavourite(id)\n      }else{\n        this.postFavourite(id,name)\n      }\n    },\n    postFavourite(id, name){\n      let user = {\n        id,\n        name\n      }\n      Vue.axios.post(\"http://localhost:3000/users\", user).\n      then(() => {\n        this.getFavourites()\n      })\n      .then(()=>{\n        this.matchFavourites()\n      })\n      .catch(() => {\n        this.error = true\n      });\n        \n    },\n    getFavourites(){\n      Vue.axios(\"http://localhost:3000/users\").then((result) => {\n        this.favouritesUsers = result.data\n      })\n      .then((res) => {\n        console.log(res)\n      })\n      .catch(() => {\n        this.error = true\n      });\n    },\n    deleteFavourite(id){\n      Vue.axios.delete(\"http://localhost:3000/users/\"+id).\n      then(() => {\n        this.getFavourites()\n      })\n      .then(()=>{\n        this.matchFavourites()\n      })\n      .catch(() => {\n        this.error = true\n      });\n    },\n    matchFavourites(){\n      console.log(this.favouritesUsers)\n      for (let n=0;n< this.$parent.users.length;n++){\n        if(this.favouritesUsers.find( user => user.id == this.$parent.users[n].id)){\n           console.log('entra')\n          if(this.$parent.users[n].favourite == true){\n            this.$parent.users[n].favourite = false\n            this.user.favourite = false\n            console.log('es false')\n          }else{\n            this.$parent.users[n].favourite = true\n            this.user.favourite = true\n            console.log('es true')\n          }\n          \n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"sass\" scoped>\n.fa-star\n  color: yellow\n\n.fa-star-ini\n  color: white\n</style>\n"]}]}